{"is_source_file": true, "format": "Python", "description": "This file provides SQLite database connection utilities and schema initialization for the Notes API backend. It manages database path resolution, connection context management, and schema setup, including a trigger for timestamp updates.", "external_files": ["os", "sqlite3", "contextlib", "typing"], "external_methods": ["os.getenv", "os.path.exists", "os.path.abspath", "sqlite3.connect"], "published": ["get_db"], "classes": [{"name": null, "description": null}], "methods": [{"name": "str _default_db_path()", "description": "Resolves and returns the path to the SQLite database file, checking environment variables, workspace fallback, or default location.", "scope": "", "scopeKind": ""}, {"name": "None init_db(conn: sqlite3.Connection)", "description": "Ensures the 'notes' table and associated trigger exist in the provided SQLite connection.", "scope": "", "scopeKind": ""}, {"name": "Generator[sqlite3.Connection,None,None] _connect(db_path: str)", "description": "Context manager for establishing a SQLite connection with proper configuration (row factory, foreign keys).", "scope": "", "scopeKind": ""}, {"name": "Generator[sqlite3.Connection,None,None] get_db()", "description": "Provides a database connection for FastAPI dependency injection, initializing schema if needed.", "scope": "", "scopeKind": ""}], "calls": ["os.getenv", "os.path.exists", "os.path.abspath", "sqlite3.connect", "conn.execute", "conn.commit", "conn.row_factory", "conn.close"], "search-terms": ["sqlite", "database connection", "notes schema", "trigger for updated_at", "context manager"], "state": 2, "file_id": 5, "knowledge_revision": 18, "git_revision": "93006f7213a041ca6e4e01ae17631fda090340f3", "revision_history": [{"11": "93006f7213a041ca6e4e01ae17631fda090340f3"}, {"18": "93006f7213a041ca6e4e01ae17631fda090340f3"}], "ctags": [{"_type": "tag", "name": "_connect", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312494-312505/notes_backend/src/api/db.py", "pattern": "/^def _connect(db_path: str) -> Generator[sqlite3.Connection, None, None]:$/", "language": "Python", "typeref": "typename:Generator[sqlite3.Connection,None,None]", "kind": "function", "signature": "(db_path: str)"}, {"_type": "tag", "name": "_default_db_path", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312494-312505/notes_backend/src/api/db.py", "pattern": "/^def _default_db_path() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312494-312505/notes_backend/src/api/db.py", "pattern": "/^def get_db() -> Generator[sqlite3.Connection, None, None]:$/", "language": "Python", "typeref": "typename:Generator[sqlite3.Connection,None,None]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312494-312505/notes_backend/src/api/db.py", "pattern": "/^def init_db(conn: sqlite3.Connection) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(conn: sqlite3.Connection)"}], "hash": "eb722a8f5186e430b41f45c8e4331c31", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/db.py"}